"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./Context/MultiContractContext.js":
/*!*****************************************!*\
  !*** ./Context/MultiContractContext.js ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultiContractContext\": function() { return /* binding */ MultiContractContext; },\n/* harmony export */   \"MultiContractProvider\": function() { return /* binding */ MultiContractProvider; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var web3modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! web3modal */ \"./node_modules/web3modal/dist/index.js\");\n/* harmony import */ var web3modal__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(web3modal__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ \"./node_modules/ethers/lib.esm/index.js\");\n/* harmony import */ var _contants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contants */ \"./Context/contants.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n// Create context\nconst MultiContractContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\n// Fetch contract function\nconst fetchContract = (address, abi, signerOrProvider)=>new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.Contract(address, abi, signerOrProvider);\nconst MultiContractProvider = (param)=>{\n    let { children  } = param;\n    _s();\n    const [currentAccount, setCurrentAccount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeContract, setActiveContract] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"optimized\"); // Default to optimized\n    const [gasFees, setGasFees] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [titleData, setTitleData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        title: \"Crowdfunding DApp\",\n        description: \"A decentralized crowdfunding platform built on blockchain technology\"\n    });\n    const [campaignsUpdatedFlag, setCampaignsUpdatedFlag] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0); // State untuk menandai update campaign\n    // Fungsi untuk memicu refresh data campaign\n    const triggerCampaignsRefresh = ()=>{\n        setCampaignsUpdatedFlag((prev)=>prev + 1);\n        console.log(\"Campaigns refresh triggered. Flag:\", campaignsUpdatedFlag + 1);\n    };\n    // Get current contract details\n    const getCurrentContract = ()=>{\n        return _contants__WEBPACK_IMPORTED_MODULE_3__.CONTRACTS[activeContract];\n    };\n    // Switch contract function\n    const switchContract = (contractType)=>{\n        setActiveContract(contractType);\n    };\n    // Get ETH price in USD with fallback\n    const getEthPrice = async ()=>{\n        try {\n            const response = await fetch(\"https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd\");\n            const data = await response.json();\n            const price = data.ethereum.usd;\n            console.log(\"Current ETH price:\", price); // Debug log\n            if (!price || price <= 0) {\n                throw new Error(\"Invalid price from CoinGecko\");\n            }\n            return price;\n        } catch (error) {\n            console.warn(\"Failed to fetch ETH price from CoinGecko, using fallback value:\", error);\n            return 2500; // Updated fallback value in USD\n        }\n    };\n    // Get transaction data from Etherscan\n    const getTransactionFromEtherscan = async (txHash)=>{\n        try {\n            const response = await fetch(\"https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionByHash&txhash=\".concat(txHash, \"&apikey=YourApiKey\"));\n            const data = await response.json();\n            return data.result;\n        } catch (error) {\n            console.warn(\"Failed to fetch from Etherscan:\", error);\n            return null;\n        }\n    };\n    // Get transaction receipt from Etherscan\n    const getTransactionReceiptFromEtherscan = async (txHash)=>{\n        try {\n            const response = await fetch(\"https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionReceipt&txhash=\".concat(txHash, \"&apikey=YourApiKey\"));\n            const data = await response.json();\n            return data.result;\n        } catch (error) {\n            console.warn(\"Failed to fetch receipt from Etherscan:\", error);\n            return null;\n        }\n    };\n    // Get gas fee for a transaction\n    const getGasFee = async (transaction)=>{\n        try {\n            const provider = transaction.provider;\n            const feeData = await provider.getFeeData();\n            const gasPrice = feeData.gasPrice || feeData.maxFeePerGas;\n            const gasLimit = await transaction.estimateGas();\n            const gasFee = gasPrice.mul(gasLimit);\n            // Get ETH price in USD\n            const ethPrice = await getEthPrice();\n            console.log(\"ETH price used for conversion:\", ethPrice); // Debug log\n            const gasFeeInEth = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(gasFee);\n            const gasFeeInUsd = (parseFloat(gasFeeInEth) * ethPrice).toFixed(2);\n            console.log(\"Gas fee calculation:\", {\n                gasFeeInEth,\n                ethPrice,\n                gasFeeInUsd\n            }); // Debug log\n            return {\n                eth: gasFeeInEth,\n                usd: gasFeeInUsd\n            };\n        } catch (error) {\n            console.error(\"Error getting gas fee:\", error);\n            return {\n                eth: \"0\",\n                usd: \"0\"\n            };\n        }\n    };\n    // Store gas fee in localStorage\n    const storeGasFee = (txHash, gasFee)=>{\n        try {\n            const storedFees = JSON.parse(localStorage.getItem(\"gasFees\") || \"{}\");\n            storedFees[txHash] = gasFee;\n            localStorage.setItem(\"gasFees\", JSON.stringify(storedFees));\n            console.log(\"Stored gas fee:\", txHash, gasFee); // Debug log\n        } catch (error) {\n            console.warn(\"Error storing gas fee:\", error);\n        }\n    };\n    // Get stored gas fee\n    const getStoredGasFee = (txHash)=>{\n        try {\n            const storedFees = JSON.parse(localStorage.getItem(\"gasFees\") || \"{}\");\n            const fee = storedFees[txHash];\n            console.log(\"Retrieved gas fee:\", txHash, fee); // Debug log\n            return fee;\n        } catch (error) {\n            console.warn(\"Error getting stored gas fee:\", error);\n            return null;\n        }\n    };\n    // Create campaign with gas tracking\n    const createCampaign = async (campaign)=>{\n        const { title , description , amount , deadline  } = campaign;\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const signer = provider.getSigner();\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, signer);\n        try {\n            const transaction = await contract.createCampaign(currentAccount, title, description, ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.parseUnits(amount, 18), new Date(deadline).getTime());\n            // Get gas fee before waiting for transaction\n            const gasFee = await getGasFee(transaction);\n            // Update gas fees state\n            setGasFees((prev)=>({\n                    ...prev,\n                    createCampaign: {\n                        ...prev.createCampaign,\n                        [activeContract]: gasFee\n                    }\n                }));\n            await transaction.wait();\n            console.log(\"Contract Call Success\", transaction);\n            triggerCampaignsRefresh(); // <-- Panggil setelah sukses\n            return transaction;\n        } catch (error) {\n            console.log(\"Contract Call Failure!\", error);\n            throw error;\n        }\n    };\n    // Get campaigns\n    const getCampaigns = async ()=>{\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, provider);\n        const campaigns = await contract.getCampaigns();\n        const parsedCampaigns = campaigns.map((campaign, i)=>({\n                owner: campaign.owner,\n                title: campaign.title,\n                description: campaign.description,\n                target: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(campaign.target.toString()),\n                deadline: campaign.deadline.toNumber(),\n                amountCollected: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(campaign.amountCollected.toString()),\n                pId: i,\n                contractVersion: activeContract // Add contract version\n            }));\n        return parsedCampaigns;\n    };\n    // Get user campaigns\n    const getUserCampaigns = async ()=>{\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, provider);\n        const allCampaigns = await contract.getCampaigns();\n        const accounts = await window.ethereum.request({\n            method: \"eth_accounts\"\n        });\n        const currentUser = accounts[0];\n        const filteredCampaigns = allCampaigns.filter((campaign)=>campaign.owner.toLowerCase() === currentUser.toLowerCase());\n        const userData = filteredCampaigns.map((campaign, i)=>({\n                owner: campaign.owner,\n                title: campaign.title,\n                description: campaign.description,\n                target: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(campaign.target.toString()),\n                deadline: campaign.deadline.toNumber(),\n                amountCollected: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(campaign.amountCollected.toString()),\n                pId: i\n            }));\n        return userData;\n    };\n    // Get donations\n    const getDonations = async (pId)=>{\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, provider);\n        const donations = await contract.getDonators(pId);\n        const numberOfDonations = donations[0].length;\n        const parsedDonations = [];\n        for(let i = 0; i < numberOfDonations; i++){\n            try {\n                const donatorAddress = donations[0][i];\n                const donationAmount = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(donations[1][i].toString());\n                // Get all events from the contract\n                const filter = contract.filters.Donated(donatorAddress);\n                const events = await contract.queryFilter(filter);\n                console.log(\"Found events for\", donatorAddress, \":\", events); // Debug log\n                let gasFee = {\n                    eth: \"0\",\n                    usd: \"0\"\n                };\n                if (events.length > 0) {\n                    // Get the most recent event for this donation amount\n                    const matchingEvent = events.find((event)=>{\n                        const eventAmount = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(event.args.amount.toString());\n                        return eventAmount === donationAmount;\n                    });\n                    if (matchingEvent) {\n                        const txHash = matchingEvent.transactionHash;\n                        console.log(\"Found transaction hash:\", txHash); // Debug log\n                        // Try to get stored gas fee first\n                        const storedFee = getStoredGasFee(txHash);\n                        if (storedFee) {\n                            console.log(\"Using stored fee:\", storedFee); // Debug log\n                            gasFee = storedFee;\n                        } else {\n                            console.log(\"No stored fee, getting from transaction\"); // Debug log\n                            // If not stored, get from transaction\n                            const tx = await provider.getTransaction(txHash);\n                            const receipt = await provider.getTransactionReceipt(txHash);\n                            if (tx && receipt) {\n                                console.log(\"Transaction data:\", tx); // Debug log\n                                console.log(\"Receipt data:\", receipt); // Debug log\n                                const gasUsed = receipt.gasUsed;\n                                const gasPrice = receipt.effectiveGasPrice || tx.gasPrice || tx.maxFeePerGas;\n                                const gasFeeInWei = gasUsed.mul(gasPrice);\n                                // Get ETH price in USD\n                                const ethPrice = await getEthPrice();\n                                console.log(\"ETH price for conversion:\", ethPrice); // Debug log\n                                const gasFeeInEth = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(gasFeeInWei);\n                                const gasFeeInUsd = (parseFloat(gasFeeInEth) * ethPrice).toFixed(2);\n                                console.log(\"Gas fee calculation:\", {\n                                    gasUsed: gasUsed.toString(),\n                                    gasPrice: gasPrice.toString(),\n                                    gasFeeInWei: gasFeeInWei.toString(),\n                                    gasFeeInEth,\n                                    ethPrice,\n                                    gasFeeInUsd\n                                }); // Debug log\n                                gasFee = {\n                                    eth: gasFeeInEth,\n                                    usd: gasFeeInUsd\n                                };\n                                // Store the gas fee for future use\n                                storeGasFee(txHash, gasFee);\n                            }\n                        }\n                    }\n                }\n                // Create donation object\n                const donation = {\n                    donator: donatorAddress,\n                    donation: donationAmount,\n                    gasFee: gasFee\n                };\n                console.log(\"Created donation object:\", donation); // Debug log\n                parsedDonations.push(donation);\n            } catch (error) {\n                console.warn(\"Error getting gas fee for donation:\", error);\n                // If we can't get the actual gas fee, use an estimate\n                const feeData = await provider.getFeeData();\n                const gasPrice = feeData.gasPrice || feeData.maxFeePerGas;\n                const gasLimit = 100000;\n                const gasFeeInWei = gasPrice.mul(gasLimit);\n                const ethPrice = await getEthPrice();\n                const gasFeeInEth = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(gasFeeInWei);\n                const gasFeeInUsd = (parseFloat(gasFeeInEth) * ethPrice).toFixed(2);\n                parsedDonations.push({\n                    donator: donations[0][i],\n                    donation: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(donations[1][i].toString()),\n                    gasFee: {\n                        eth: gasFeeInEth,\n                        usd: gasFeeInUsd\n                    }\n                });\n            }\n        }\n        console.log(\"Final parsed donations:\", parsedDonations); // Debug log\n        return parsedDonations;\n    };\n    // Donate with gas tracking\n    const donate = async (pId, amount)=>{\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const signer = provider.getSigner();\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, signer);\n        try {\n            const transaction = await contract.donateToCampaign(pId, {\n                value: ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.parseEther(amount)\n            });\n            console.log(\"Transaction sent:\", transaction); // Debug log\n            // Wait for transaction to be mined\n            console.log(\"Waiting for transaction to be mined...\");\n            const receipt = await transaction.wait();\n            console.log(\"Transaction receipt:\", receipt); // Debug log\n            // Calculate gas fee from receipt\n            const gasUsed = receipt.gasUsed;\n            const gasPrice = transaction.gasPrice || transaction.maxFeePerGas;\n            const gasFeeInWei = gasUsed.mul(gasPrice);\n            // Get ETH price in USD\n            const ethPrice = await getEthPrice();\n            const gasFeeInEth = ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(gasFeeInWei);\n            const gasFeeInUsd = (parseFloat(gasFeeInEth) * ethPrice).toFixed(2);\n            const gasFee = {\n                eth: gasFeeInEth,\n                usd: gasFeeInUsd\n            };\n            console.log(\"Calculated gas fee:\", gasFee); // Debug log\n            // Store gas fee in localStorage\n            storeGasFee(transaction.hash, gasFee);\n            // Update gas fees state\n            setGasFees((prev)=>({\n                    ...prev,\n                    donate: {\n                        ...prev.donate,\n                        [activeContract]: gasFee\n                    }\n                }));\n            triggerCampaignsRefresh();\n            return transaction;\n        } catch (error) {\n            console.log(\"Contract Call Failure!\", error);\n            throw error;\n        }\n    };\n    // Batch donate with gas tracking\n    const batchDonate = async (ids, amounts)=>{\n        const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n        const connection = await web3Modal.connect();\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(connection);\n        const signer = provider.getSigner();\n        const contract = fetchContract(getCurrentContract().address, getCurrentContract().abi, signer);\n        try {\n            // Calculate total value and format amounts properly\n            const totalValue = amounts.reduce((sum, amount)=>sum.add(ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.parseEther(amount.toString())), ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.BigNumber.from(0));\n            // Format amounts for the contract call\n            const formattedAmounts = amounts.map((amount)=>ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.parseEther(amount.toString()).toString());\n            console.log(\"Campaign IDs:\", ids); // Debug log\n            console.log(\"Sending amounts:\", formattedAmounts); // Debug log\n            console.log(\"Total value:\", ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(totalValue)); // Debug log\n            let transaction;\n            let methodName;\n            // If only one campaign is selected, use regular donate function\n            if (ids.length === 1) {\n                console.log(\"Using single donation function\");\n                methodName = \"donateToCampaign\";\n                transaction = await contract.donateToCampaign(ids[0], {\n                    value: totalValue\n                });\n            } else {\n                // Use batch donation for multiple campaigns\n                console.log(\"Using batch donation function\");\n                methodName = activeContract === \"batch-processing\" ? \"donateBatch\" : \"batchDonate\";\n                transaction = await contract[methodName](ids, formattedAmounts, {\n                    value: totalValue\n                });\n            }\n            // Get gas fee before waiting for transaction\n            const gasFee = await getGasFee(transaction);\n            // Update gas fees state\n            setGasFees((prev)=>({\n                    ...prev,\n                    batchDonate: {\n                        ...prev.batchDonate,\n                        [activeContract]: gasFee\n                    }\n                }));\n            // Wait for transaction to be mined\n            const receipt = await transaction.wait();\n            // Log transaction for each campaign\n            for(let i = 0; i < ids.length; i++){\n                await createDonation(transaction.hash, ids[i], amounts[i], methodName);\n            }\n            triggerCampaignsRefresh();\n            return transaction;\n        } catch (error) {\n            console.log(\"Contract Call Failure!\", error);\n            throw error;\n        }\n    };\n    // Check if wallet is connected\n    const checkIfWalletConnected = async ()=>{\n        try {\n            if (!window.ethereum) return console.log(\"Install MetaMask\");\n            const accounts = await window.ethereum.request({\n                method: \"eth_accounts\"\n            });\n            if (accounts.length) {\n                setCurrentAccount(accounts[0]);\n            } else {\n                console.log(\"No Account Found\");\n            }\n        } catch (error) {\n            console.log(\"Something wrong while connecting to wallet!\");\n        }\n    };\n    // Connect wallet\n    const connectWallet = async ()=>{\n        try {\n            if (!window.ethereum) return console.log(\"Install Metamask!\");\n            const accounts = await window.ethereum.request({\n                method: \"eth_requestAccounts\"\n            });\n            setCurrentAccount(accounts[0]);\n        } catch (error) {\n            console.log(\"Error while connecting to wallet!\");\n        }\n    };\n    // Disconnect wallet\n    const disconnectWallet = async ()=>{\n        try {\n            const web3Modal = new (web3modal__WEBPACK_IMPORTED_MODULE_2___default())();\n            // Clear the cached provider\n            if (web3Modal.cachedProvider) {\n                await web3Modal.clearCachedProvider();\n            }\n            // Clear the current account\n            setCurrentAccount(\"\");\n            // Clear any stored wallet data in localStorage\n            localStorage.removeItem(\"WEB3_CONNECT_CACHED_PROVIDER\");\n            // Request MetaMask to disconnect\n            if (window.ethereum) {\n                await window.ethereum.request({\n                    method: \"wallet_requestPermissions\",\n                    params: [\n                        {\n                            eth_accounts: {}\n                        }\n                    ]\n                });\n            }\n            // Force reload the page to clear any remaining state\n            window.location.reload();\n        } catch (error) {\n            console.log(\"Error while disconnecting wallet!\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        checkIfWalletConnected();\n        // Add event listeners for MetaMask\n        if (window.ethereum) {\n            // Listen for account changes\n            window.ethereum.on(\"accountsChanged\", (accounts)=>{\n                if (accounts.length === 0) {\n                    // User disconnected their wallet\n                    setCurrentAccount(\"\");\n                    localStorage.removeItem(\"WEB3_CONNECT_CACHED_PROVIDER\");\n                } else {\n                    // User switched accounts\n                    setCurrentAccount(accounts[0]);\n                }\n            });\n            // Listen for chain changes\n            window.ethereum.on(\"chainChanged\", ()=>{\n                window.location.reload();\n            });\n            // Listen for disconnect\n            window.ethereum.on(\"disconnect\", ()=>{\n                setCurrentAccount(\"\");\n                localStorage.removeItem(\"WEB3_CONNECT_CACHED_PROVIDER\");\n            });\n        }\n        // Cleanup function\n        return ()=>{\n            if (window.ethereum) {\n                window.ethereum.removeAllListeners(\"accountsChanged\");\n                window.ethereum.removeAllListeners(\"chainChanged\");\n                window.ethereum.removeAllListeners(\"disconnect\");\n            }\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MultiContractContext.Provider, {\n        value: {\n            currentAccount,\n            activeContract,\n            gasFees,\n            titleData,\n            switchContract,\n            createCampaign,\n            getCampaigns,\n            getUserCampaigns,\n            donate,\n            batchDonate,\n            getDonations,\n            connectWallet,\n            disconnectWallet,\n            getCurrentContract,\n            campaignsUpdatedFlag\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/davemf/Coding/crowdfunding/Context/MultiContractContext.js\",\n        lineNumber: 612,\n        columnNumber: 9\n    }, undefined);\n};\n_s(MultiContractProvider, \"xl5Iu0SKZP6U08BOobouLIDhzb4=\");\n_c = MultiContractProvider;\nvar _c;\n$RefreshReg$(_c, \"MultiContractProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztvQkFDSCx5QkFBeUI7b0JBQ3pCeEosa0JBQWtCNEYsUUFBUSxDQUFDLEVBQUU7Z0JBQ2pDLENBQUM7WUFDTDtZQUVBLDJCQUEyQjtZQUMzQkMsT0FBT3JFLFFBQVEsQ0FBQ3FJLEVBQUUsQ0FBQyxnQkFBZ0IsSUFBTTtnQkFDckNoRSxPQUFPOEQsUUFBUSxDQUFDQyxNQUFNO1lBQzFCO1lBRUEsd0JBQXdCO1lBQ3hCL0QsT0FBT3JFLFFBQVEsQ0FBQ3FJLEVBQUUsQ0FBQyxjQUFjLElBQU07Z0JBQ25DN0osa0JBQWtCO2dCQUNsQndELGFBQWFnRyxVQUFVLENBQUM7WUFDNUI7UUFDSixDQUFDO1FBRUQsbUJBQW1CO1FBQ25CLE9BQU8sSUFBTTtZQUNULElBQUkzRCxPQUFPckUsUUFBUSxFQUFFO2dCQUNqQnFFLE9BQU9yRSxRQUFRLENBQUNzSSxrQkFBa0IsQ0FBQztnQkFDbkNqRSxPQUFPckUsUUFBUSxDQUFDc0ksa0JBQWtCLENBQUM7Z0JBQ25DakUsT0FBT3JFLFFBQVEsQ0FBQ3NJLGtCQUFrQixDQUFDO1lBQ3ZDLENBQUM7UUFDTDtJQUNKLEdBQUcsRUFBRTtJQUVMLHFCQUNJLDhEQUFDdksscUJBQXFCd0ssUUFBUTtRQUMxQjNCLE9BQU87WUFDSHJJO1lBQ0FFO1lBQ0FFO1lBQ0FFO1lBQ0FXO1lBQ0E4QztZQUNBZ0I7WUFDQVk7WUFDQXdDO1lBQ0FLO1lBQ0FsQztZQUNBK0M7WUFDQUM7WUFDQXRJO1lBQ0FOO1FBQ0o7a0JBRUNYOzs7Ozs7QUFHYixFQUFFO0dBN21CV0Q7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vQ29udGV4dC9NdWx0aUNvbnRyYWN0Q29udGV4dC5qcz8xNGI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBjcmVhdGVDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgV2VuYjNNb2RhbCBmcm9tIFwid2ViM21vZGFsXCI7XG5pbXBvcnQgeyBldGhlcnMgfSBmcm9tIFwiZXRoZXJzXCI7XG5pbXBvcnQgeyBDT05UUkFDVFMgfSBmcm9tIFwiLi9jb250YW50c1wiO1xuXG4vLyBDcmVhdGUgY29udGV4dFxuZXhwb3J0IGNvbnN0IE11bHRpQ29udHJhY3RDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuXG4vLyBGZXRjaCBjb250cmFjdCBmdW5jdGlvblxuY29uc3QgZmV0Y2hDb250cmFjdCA9IChhZGRyZXNzLCBhYmksIHNpZ25lck9yUHJvdmlkZXIpID0+XG4gICAgbmV3IGV0aGVycy5Db250cmFjdChhZGRyZXNzLCBhYmksIHNpZ25lck9yUHJvdmlkZXIpO1xuXG5leHBvcnQgY29uc3QgTXVsdGlDb250cmFjdFByb3ZpZGVyID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICAgIGNvbnN0IFtjdXJyZW50QWNjb3VudCwgc2V0Q3VycmVudEFjY291bnRdID0gdXNlU3RhdGUoXCJcIik7XG4gICAgY29uc3QgW2FjdGl2ZUNvbnRyYWN0LCBzZXRBY3RpdmVDb250cmFjdF0gPSB1c2VTdGF0ZShcIm9wdGltaXplZFwiKTsgLy8gRGVmYXVsdCB0byBvcHRpbWl6ZWRcbiAgICBjb25zdCBbZ2FzRmVlcywgc2V0R2FzRmVlc10gPSB1c2VTdGF0ZSh7fSk7XG4gICAgY29uc3QgW3RpdGxlRGF0YSwgc2V0VGl0bGVEYXRhXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgdGl0bGU6IFwiQ3Jvd2RmdW5kaW5nIERBcHBcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQSBkZWNlbnRyYWxpemVkIGNyb3dkZnVuZGluZyBwbGF0Zm9ybSBidWlsdCBvbiBibG9ja2NoYWluIHRlY2hub2xvZ3lcIlxuICAgIH0pO1xuICAgIGNvbnN0IFtjYW1wYWlnbnNVcGRhdGVkRmxhZywgc2V0Q2FtcGFpZ25zVXBkYXRlZEZsYWddID0gdXNlU3RhdGUoMCk7IC8vIFN0YXRlIHVudHVrIG1lbmFuZGFpIHVwZGF0ZSBjYW1wYWlnblxuXG4gICAgLy8gRnVuZ3NpIHVudHVrIG1lbWljdSByZWZyZXNoIGRhdGEgY2FtcGFpZ25cbiAgICBjb25zdCB0cmlnZ2VyQ2FtcGFpZ25zUmVmcmVzaCA9ICgpID0+IHtcbiAgICAgICAgc2V0Q2FtcGFpZ25zVXBkYXRlZEZsYWcocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FtcGFpZ25zIHJlZnJlc2ggdHJpZ2dlcmVkLiBGbGFnOlwiLCBjYW1wYWlnbnNVcGRhdGVkRmxhZyArIDEpO1xuICAgIH07XG5cbiAgICAvLyBHZXQgY3VycmVudCBjb250cmFjdCBkZXRhaWxzXG4gICAgY29uc3QgZ2V0Q3VycmVudENvbnRyYWN0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gQ09OVFJBQ1RTW2FjdGl2ZUNvbnRyYWN0XTtcbiAgICB9O1xuXG4gICAgLy8gU3dpdGNoIGNvbnRyYWN0IGZ1bmN0aW9uXG4gICAgY29uc3Qgc3dpdGNoQ29udHJhY3QgPSAoY29udHJhY3RUeXBlKSA9PiB7XG4gICAgICAgIHNldEFjdGl2ZUNvbnRyYWN0KGNvbnRyYWN0VHlwZSk7XG4gICAgfTtcblxuICAgIC8vIEdldCBFVEggcHJpY2UgaW4gVVNEIHdpdGggZmFsbGJhY2tcbiAgICBjb25zdCBnZXRFdGhQcmljZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmNvaW5nZWNrby5jb20vYXBpL3YzL3NpbXBsZS9wcmljZT9pZHM9ZXRoZXJldW0mdnNfY3VycmVuY2llcz11c2QnKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCBwcmljZSA9IGRhdGEuZXRoZXJldW0udXNkO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDdXJyZW50IEVUSCBwcmljZTpcIiwgcHJpY2UpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgIGlmICghcHJpY2UgfHwgcHJpY2UgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcHJpY2UgZnJvbSBDb2luR2Vja29cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZmV0Y2ggRVRIIHByaWNlIGZyb20gQ29pbkdlY2tvLCB1c2luZyBmYWxsYmFjayB2YWx1ZTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIDI1MDA7IC8vIFVwZGF0ZWQgZmFsbGJhY2sgdmFsdWUgaW4gVVNEXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gR2V0IHRyYW5zYWN0aW9uIGRhdGEgZnJvbSBFdGhlcnNjYW5cbiAgICBjb25zdCBnZXRUcmFuc2FjdGlvbkZyb21FdGhlcnNjYW4gPSBhc3luYyAodHhIYXNoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS1zZXBvbGlhLmV0aGVyc2Nhbi5pby9hcGk/bW9kdWxlPXByb3h5JmFjdGlvbj1ldGhfZ2V0VHJhbnNhY3Rpb25CeUhhc2gmdHhoYXNoPSR7dHhIYXNofSZhcGlrZXk9WW91ckFwaUtleWApO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLnJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBmZXRjaCBmcm9tIEV0aGVyc2NhbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gR2V0IHRyYW5zYWN0aW9uIHJlY2VpcHQgZnJvbSBFdGhlcnNjYW5cbiAgICBjb25zdCBnZXRUcmFuc2FjdGlvblJlY2VpcHRGcm9tRXRoZXJzY2FuID0gYXN5bmMgKHR4SGFzaCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGktc2Vwb2xpYS5ldGhlcnNjYW4uaW8vYXBpP21vZHVsZT1wcm94eSZhY3Rpb249ZXRoX2dldFRyYW5zYWN0aW9uUmVjZWlwdCZ0eGhhc2g9JHt0eEhhc2h9JmFwaWtleT1Zb3VyQXBpS2V5YCk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEucmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZldGNoIHJlY2VpcHQgZnJvbSBFdGhlcnNjYW46XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEdldCBnYXMgZmVlIGZvciBhIHRyYW5zYWN0aW9uXG4gICAgY29uc3QgZ2V0R2FzRmVlID0gYXN5bmMgKHRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRyYW5zYWN0aW9uLnByb3ZpZGVyO1xuICAgICAgICAgICAgY29uc3QgZmVlRGF0YSA9IGF3YWl0IHByb3ZpZGVyLmdldEZlZURhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGdhc1ByaWNlID0gZmVlRGF0YS5nYXNQcmljZSB8fCBmZWVEYXRhLm1heEZlZVBlckdhcztcbiAgICAgICAgICAgIGNvbnN0IGdhc0xpbWl0ID0gYXdhaXQgdHJhbnNhY3Rpb24uZXN0aW1hdGVHYXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGdhc0ZlZSA9IGdhc1ByaWNlLm11bChnYXNMaW1pdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEdldCBFVEggcHJpY2UgaW4gVVNEXG4gICAgICAgICAgICBjb25zdCBldGhQcmljZSA9IGF3YWl0IGdldEV0aFByaWNlKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVUSCBwcmljZSB1c2VkIGZvciBjb252ZXJzaW9uOlwiLCBldGhQcmljZSk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBnYXNGZWVJbkV0aCA9IGV0aGVycy51dGlscy5mb3JtYXRFdGhlcihnYXNGZWUpO1xuICAgICAgICAgICAgY29uc3QgZ2FzRmVlSW5Vc2QgPSAocGFyc2VGbG9hdChnYXNGZWVJbkV0aCkgKiBldGhQcmljZSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJHYXMgZmVlIGNhbGN1bGF0aW9uOlwiLCB7XG4gICAgICAgICAgICAgICAgZ2FzRmVlSW5FdGgsXG4gICAgICAgICAgICAgICAgZXRoUHJpY2UsXG4gICAgICAgICAgICAgICAgZ2FzRmVlSW5Vc2RcbiAgICAgICAgICAgIH0pOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBldGg6IGdhc0ZlZUluRXRoLFxuICAgICAgICAgICAgICAgIHVzZDogZ2FzRmVlSW5Vc2RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBnYXMgZmVlOlwiLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4geyBldGg6IFwiMFwiLCB1c2Q6IFwiMFwiIH07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gU3RvcmUgZ2FzIGZlZSBpbiBsb2NhbFN0b3JhZ2VcbiAgICBjb25zdCBzdG9yZUdhc0ZlZSA9ICh0eEhhc2gsIGdhc0ZlZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVkRmVlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhc0ZlZXMnKSB8fCAne30nKTtcbiAgICAgICAgICAgIHN0b3JlZEZlZXNbdHhIYXNoXSA9IGdhc0ZlZTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYXNGZWVzJywgSlNPTi5zdHJpbmdpZnkoc3RvcmVkRmVlcykpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdG9yZWQgZ2FzIGZlZTpcIiwgdHhIYXNoLCBnYXNGZWUpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIHN0b3JpbmcgZ2FzIGZlZTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEdldCBzdG9yZWQgZ2FzIGZlZVxuICAgIGNvbnN0IGdldFN0b3JlZEdhc0ZlZSA9ICh0eEhhc2gpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEZlZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYXNGZWVzJykgfHwgJ3t9Jyk7XG4gICAgICAgICAgICBjb25zdCBmZWUgPSBzdG9yZWRGZWVzW3R4SGFzaF07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJldHJpZXZlZCBnYXMgZmVlOlwiLCB0eEhhc2gsIGZlZSk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgcmV0dXJuIGZlZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGdldHRpbmcgc3RvcmVkIGdhcyBmZWU6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBjYW1wYWlnbiB3aXRoIGdhcyB0cmFja2luZ1xuICAgIGNvbnN0IGNyZWF0ZUNhbXBhaWduID0gYXN5bmMgKGNhbXBhaWduKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBhbW91bnQsIGRlYWRsaW5lIH0gPSBjYW1wYWlnbjtcbiAgICAgICAgY29uc3Qgd2ViM01vZGFsID0gbmV3IFdlbmIzTW9kYWwoKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHdlYjNNb2RhbC5jb25uZWN0KCk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKGNvbm5lY3Rpb24pO1xuICAgICAgICBjb25zdCBzaWduZXIgPSBwcm92aWRlci5nZXRTaWduZXIoKTtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBmZXRjaENvbnRyYWN0KFxuICAgICAgICAgICAgZ2V0Q3VycmVudENvbnRyYWN0KCkuYWRkcmVzcyxcbiAgICAgICAgICAgIGdldEN1cnJlbnRDb250cmFjdCgpLmFiaSxcbiAgICAgICAgICAgIHNpZ25lclxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGNvbnRyYWN0LmNyZWF0ZUNhbXBhaWduKFxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY2NvdW50LFxuICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGV0aGVycy51dGlscy5wYXJzZVVuaXRzKGFtb3VudCwgMTgpLFxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKGRlYWRsaW5lKS5nZXRUaW1lKClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEdldCBnYXMgZmVlIGJlZm9yZSB3YWl0aW5nIGZvciB0cmFuc2FjdGlvblxuICAgICAgICAgICAgY29uc3QgZ2FzRmVlID0gYXdhaXQgZ2V0R2FzRmVlKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGdhcyBmZWVzIHN0YXRlXG4gICAgICAgICAgICBzZXRHYXNGZWVzKHByZXYgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgIGNyZWF0ZUNhbXBhaWduOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByZXYuY3JlYXRlQ2FtcGFpZ24sXG4gICAgICAgICAgICAgICAgICAgIFthY3RpdmVDb250cmFjdF06IGdhc0ZlZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgYXdhaXQgdHJhbnNhY3Rpb24ud2FpdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250cmFjdCBDYWxsIFN1Y2Nlc3NcIiwgdHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgdHJpZ2dlckNhbXBhaWduc1JlZnJlc2goKTsgLy8gPC0tIFBhbmdnaWwgc2V0ZWxhaCBzdWtzZXNcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29udHJhY3QgQ2FsbCBGYWlsdXJlIVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBHZXQgY2FtcGFpZ25zXG4gICAgY29uc3QgZ2V0Q2FtcGFpZ25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB3ZWIzTW9kYWwgPSBuZXcgV2VuYjNNb2RhbCgpO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgd2ViM01vZGFsLmNvbm5lY3QoKTtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXIoY29ubmVjdGlvbik7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ID0gZmV0Y2hDb250cmFjdChcbiAgICAgICAgICAgIGdldEN1cnJlbnRDb250cmFjdCgpLmFkZHJlc3MsXG4gICAgICAgICAgICBnZXRDdXJyZW50Q29udHJhY3QoKS5hYmksXG4gICAgICAgICAgICBwcm92aWRlclxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNhbXBhaWducyA9IGF3YWl0IGNvbnRyYWN0LmdldENhbXBhaWducygpO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZENhbXBhaWducyA9IGNhbXBhaWducy5tYXAoKGNhbXBhaWduLCBpKSA9PiAoe1xuICAgICAgICAgICAgb3duZXI6IGNhbXBhaWduLm93bmVyLFxuICAgICAgICAgICAgdGl0bGU6IGNhbXBhaWduLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGNhbXBhaWduLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGFyZ2V0OiBldGhlcnMudXRpbHMuZm9ybWF0RXRoZXIoY2FtcGFpZ24udGFyZ2V0LnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgZGVhZGxpbmU6IGNhbXBhaWduLmRlYWRsaW5lLnRvTnVtYmVyKCksXG4gICAgICAgICAgICBhbW91bnRDb2xsZWN0ZWQ6IGV0aGVycy51dGlscy5mb3JtYXRFdGhlcihcbiAgICAgICAgICAgICAgICBjYW1wYWlnbi5hbW91bnRDb2xsZWN0ZWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHBJZDogaSxcbiAgICAgICAgICAgIGNvbnRyYWN0VmVyc2lvbjogYWN0aXZlQ29udHJhY3QgLy8gQWRkIGNvbnRyYWN0IHZlcnNpb25cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBwYXJzZWRDYW1wYWlnbnM7XG4gICAgfTtcblxuICAgIC8vIEdldCB1c2VyIGNhbXBhaWduc1xuICAgIGNvbnN0IGdldFVzZXJDYW1wYWlnbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdlYjNNb2RhbCA9IG5ldyBXZW5iM01vZGFsKCk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB3ZWIzTW9kYWwuY29ubmVjdCgpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMucHJvdmlkZXJzLldlYjNQcm92aWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBmZXRjaENvbnRyYWN0KFxuICAgICAgICAgICAgZ2V0Q3VycmVudENvbnRyYWN0KCkuYWRkcmVzcyxcbiAgICAgICAgICAgIGdldEN1cnJlbnRDb250cmFjdCgpLmFiaSxcbiAgICAgICAgICAgIHByb3ZpZGVyXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYWxsQ2FtcGFpZ25zID0gYXdhaXQgY29udHJhY3QuZ2V0Q2FtcGFpZ25zKCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiBcImV0aF9hY2NvdW50c1wiLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBhY2NvdW50c1swXTtcblxuICAgICAgICBjb25zdCBmaWx0ZXJlZENhbXBhaWducyA9IGFsbENhbXBhaWducy5maWx0ZXIoXG4gICAgICAgICAgICAoY2FtcGFpZ24pID0+XG4gICAgICAgICAgICAgICAgY2FtcGFpZ24ub3duZXIudG9Mb3dlckNhc2UoKSA9PT0gY3VycmVudFVzZXIudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0gZmlsdGVyZWRDYW1wYWlnbnMubWFwKChjYW1wYWlnbiwgaSkgPT4gKHtcbiAgICAgICAgICAgIG93bmVyOiBjYW1wYWlnbi5vd25lcixcbiAgICAgICAgICAgIHRpdGxlOiBjYW1wYWlnbi50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjYW1wYWlnbi5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRhcmdldDogZXRoZXJzLnV0aWxzLmZvcm1hdEV0aGVyKGNhbXBhaWduLnRhcmdldC50b1N0cmluZygpKSxcbiAgICAgICAgICAgIGRlYWRsaW5lOiBjYW1wYWlnbi5kZWFkbGluZS50b051bWJlcigpLFxuICAgICAgICAgICAgYW1vdW50Q29sbGVjdGVkOiBldGhlcnMudXRpbHMuZm9ybWF0RXRoZXIoXG4gICAgICAgICAgICAgICAgY2FtcGFpZ24uYW1vdW50Q29sbGVjdGVkLnRvU3RyaW5nKClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBwSWQ6IGksXG4gICAgICAgIH0pKTtcblxuICAgICAgICByZXR1cm4gdXNlckRhdGE7XG4gICAgfTtcblxuICAgIC8vIEdldCBkb25hdGlvbnNcbiAgICBjb25zdCBnZXREb25hdGlvbnMgPSBhc3luYyAocElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHdlYjNNb2RhbCA9IG5ldyBXZW5iM01vZGFsKCk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB3ZWIzTW9kYWwuY29ubmVjdCgpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMucHJvdmlkZXJzLldlYjNQcm92aWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgY29uc3QgY29udHJhY3QgPSBmZXRjaENvbnRyYWN0KFxuICAgICAgICAgICAgZ2V0Q3VycmVudENvbnRyYWN0KCkuYWRkcmVzcyxcbiAgICAgICAgICAgIGdldEN1cnJlbnRDb250cmFjdCgpLmFiaSxcbiAgICAgICAgICAgIHByb3ZpZGVyXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZG9uYXRpb25zID0gYXdhaXQgY29udHJhY3QuZ2V0RG9uYXRvcnMocElkKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZEb25hdGlvbnMgPSBkb25hdGlvbnNbMF0ubGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZERvbmF0aW9ucyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZEb25hdGlvbnM7IGkrKykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb25hdG9yQWRkcmVzcyA9IGRvbmF0aW9uc1swXVtpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkb25hdGlvbkFtb3VudCA9IGV0aGVycy51dGlscy5mb3JtYXRFdGhlcihkb25hdGlvbnNbMV1baV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBldmVudHMgZnJvbSB0aGUgY29udHJhY3RcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBjb250cmFjdC5maWx0ZXJzLkRvbmF0ZWQoZG9uYXRvckFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGNvbnRyYWN0LnF1ZXJ5RmlsdGVyKGZpbHRlcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCBldmVudHMgZm9yXCIsIGRvbmF0b3JBZGRyZXNzLCBcIjpcIiwgZXZlbnRzKTsgLy8gRGVidWcgbG9nXG5cbiAgICAgICAgICAgICAgICBsZXQgZ2FzRmVlID0geyBldGg6IFwiMFwiLCB1c2Q6IFwiMFwiIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBtb3N0IHJlY2VudCBldmVudCBmb3IgdGhpcyBkb25hdGlvbiBhbW91bnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdFdmVudCA9IGV2ZW50cy5maW5kKGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50QW1vdW50ID0gZXRoZXJzLnV0aWxzLmZvcm1hdEV0aGVyKGV2ZW50LmFyZ3MuYW1vdW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50QW1vdW50ID09PSBkb25hdGlvbkFtb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4SGFzaCA9IG1hdGNoaW5nRXZlbnQudHJhbnNhY3Rpb25IYXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCB0cmFuc2FjdGlvbiBoYXNoOlwiLCB0eEhhc2gpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBzdG9yZWQgZ2FzIGZlZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkRmVlID0gZ2V0U3RvcmVkR2FzRmVlKHR4SGFzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmVkRmVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyBzdG9yZWQgZmVlOlwiLCBzdG9yZWRGZWUpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNGZWUgPSBzdG9yZWRGZWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gc3RvcmVkIGZlZSwgZ2V0dGluZyBmcm9tIHRyYW5zYWN0aW9uXCIpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3Qgc3RvcmVkLCBnZXQgZnJvbSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgcHJvdmlkZXIuZ2V0VHJhbnNhY3Rpb24odHhIYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0ID0gYXdhaXQgcHJvdmlkZXIuZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KHR4SGFzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR4ICYmIHJlY2VpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUcmFuc2FjdGlvbiBkYXRhOlwiLCB0eCk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlY2VpcHQgZGF0YTpcIiwgcmVjZWlwdCk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FzVXNlZCA9IHJlY2VpcHQuZ2FzVXNlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FzUHJpY2UgPSByZWNlaXB0LmVmZmVjdGl2ZUdhc1ByaWNlIHx8IHR4Lmdhc1ByaWNlIHx8IHR4Lm1heEZlZVBlckdhcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FzRmVlSW5XZWkgPSBnYXNVc2VkLm11bChnYXNQcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgRVRIIHByaWNlIGluIFVTRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldGhQcmljZSA9IGF3YWl0IGdldEV0aFByaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVRIIHByaWNlIGZvciBjb252ZXJzaW9uOlwiLCBldGhQcmljZSk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FzRmVlSW5FdGggPSBldGhlcnMudXRpbHMuZm9ybWF0RXRoZXIoZ2FzRmVlSW5XZWkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnYXNGZWVJblVzZCA9IChwYXJzZUZsb2F0KGdhc0ZlZUluRXRoKSAqIGV0aFByaWNlKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHYXMgZmVlIGNhbGN1bGF0aW9uOlwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNVc2VkOiBnYXNVc2VkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogZ2FzUHJpY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc0ZlZUluV2VpOiBnYXNGZWVJbldlaS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FzRmVlSW5FdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldGhQcmljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc0ZlZUluVXNkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc0ZlZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0aDogZ2FzRmVlSW5FdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2Q6IGdhc0ZlZUluVXNkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGdhcyBmZWUgZm9yIGZ1dHVyZSB1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVHYXNGZWUodHhIYXNoLCBnYXNGZWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBkb25hdGlvbiBvYmplY3RcbiAgICAgICAgICAgICAgICBjb25zdCBkb25hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgZG9uYXRvcjogZG9uYXRvckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIGRvbmF0aW9uOiBkb25hdGlvbkFtb3VudCxcbiAgICAgICAgICAgICAgICAgICAgZ2FzRmVlOiBnYXNGZWVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDcmVhdGVkIGRvbmF0aW9uIG9iamVjdDpcIiwgZG9uYXRpb24pOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgICAgICBwYXJzZWREb25hdGlvbnMucHVzaChkb25hdGlvbik7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGdldHRpbmcgZ2FzIGZlZSBmb3IgZG9uYXRpb246XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBnZXQgdGhlIGFjdHVhbCBnYXMgZmVlLCB1c2UgYW4gZXN0aW1hdGVcbiAgICAgICAgICAgICAgICBjb25zdCBmZWVEYXRhID0gYXdhaXQgcHJvdmlkZXIuZ2V0RmVlRGF0YSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdhc1ByaWNlID0gZmVlRGF0YS5nYXNQcmljZSB8fCBmZWVEYXRhLm1heEZlZVBlckdhcztcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNMaW1pdCA9IDEwMDAwMDtcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNGZWVJbldlaSA9IGdhc1ByaWNlLm11bChnYXNMaW1pdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXRoUHJpY2UgPSBhd2FpdCBnZXRFdGhQcmljZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGdhc0ZlZUluRXRoID0gZXRoZXJzLnV0aWxzLmZvcm1hdEV0aGVyKGdhc0ZlZUluV2VpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNGZWVJblVzZCA9IChwYXJzZUZsb2F0KGdhc0ZlZUluRXRoKSAqIGV0aFByaWNlKS50b0ZpeGVkKDIpO1xuXG4gICAgICAgICAgICAgICAgcGFyc2VkRG9uYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkb25hdG9yOiBkb25hdGlvbnNbMF1baV0sXG4gICAgICAgICAgICAgICAgICAgIGRvbmF0aW9uOiBldGhlcnMudXRpbHMuZm9ybWF0RXRoZXIoZG9uYXRpb25zWzFdW2ldLnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgICAgICAgICBnYXNGZWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV0aDogZ2FzRmVlSW5FdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2Q6IGdhc0ZlZUluVXNkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRmluYWwgcGFyc2VkIGRvbmF0aW9uczpcIiwgcGFyc2VkRG9uYXRpb25zKTsgLy8gRGVidWcgbG9nXG4gICAgICAgIHJldHVybiBwYXJzZWREb25hdGlvbnM7XG4gICAgfTtcblxuICAgIC8vIERvbmF0ZSB3aXRoIGdhcyB0cmFja2luZ1xuICAgIGNvbnN0IGRvbmF0ZSA9IGFzeW5jIChwSWQsIGFtb3VudCkgPT4ge1xuICAgICAgICBjb25zdCB3ZWIzTW9kYWwgPSBuZXcgV2VuYjNNb2RhbCgpO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgd2ViM01vZGFsLmNvbm5lY3QoKTtcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZXRoZXJzLnByb3ZpZGVycy5XZWIzUHJvdmlkZXIoY29ubmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHNpZ25lciA9IHByb3ZpZGVyLmdldFNpZ25lcigpO1xuICAgICAgICBjb25zdCBjb250cmFjdCA9IGZldGNoQ29udHJhY3QoXG4gICAgICAgICAgICBnZXRDdXJyZW50Q29udHJhY3QoKS5hZGRyZXNzLFxuICAgICAgICAgICAgZ2V0Q3VycmVudENvbnRyYWN0KCkuYWJpLFxuICAgICAgICAgICAgc2lnbmVyXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgY29udHJhY3QuZG9uYXRlVG9DYW1wYWlnbihwSWQsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZXRoZXJzLnV0aWxzLnBhcnNlRXRoZXIoYW1vdW50KSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRyYW5zYWN0aW9uIHNlbnQ6XCIsIHRyYW5zYWN0aW9uKTsgLy8gRGVidWcgbG9nXG5cbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRyYW5zYWN0aW9uIHRvIGJlIG1pbmVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIldhaXRpbmcgZm9yIHRyYW5zYWN0aW9uIHRvIGJlIG1pbmVkLi4uXCIpO1xuICAgICAgICAgICAgY29uc3QgcmVjZWlwdCA9IGF3YWl0IHRyYW5zYWN0aW9uLndhaXQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVHJhbnNhY3Rpb24gcmVjZWlwdDpcIiwgcmVjZWlwdCk7IC8vIERlYnVnIGxvZ1xuXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgZ2FzIGZlZSBmcm9tIHJlY2VpcHRcbiAgICAgICAgICAgIGNvbnN0IGdhc1VzZWQgPSByZWNlaXB0Lmdhc1VzZWQ7XG4gICAgICAgICAgICBjb25zdCBnYXNQcmljZSA9IHRyYW5zYWN0aW9uLmdhc1ByaWNlIHx8IHRyYW5zYWN0aW9uLm1heEZlZVBlckdhcztcbiAgICAgICAgICAgIGNvbnN0IGdhc0ZlZUluV2VpID0gZ2FzVXNlZC5tdWwoZ2FzUHJpY2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHZXQgRVRIIHByaWNlIGluIFVTRFxuICAgICAgICAgICAgY29uc3QgZXRoUHJpY2UgPSBhd2FpdCBnZXRFdGhQcmljZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBnYXNGZWVJbkV0aCA9IGV0aGVycy51dGlscy5mb3JtYXRFdGhlcihnYXNGZWVJbldlaSk7XG4gICAgICAgICAgICBjb25zdCBnYXNGZWVJblVzZCA9IChwYXJzZUZsb2F0KGdhc0ZlZUluRXRoKSAqIGV0aFByaWNlKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBnYXNGZWUgPSB7XG4gICAgICAgICAgICAgICAgZXRoOiBnYXNGZWVJbkV0aCxcbiAgICAgICAgICAgICAgICB1c2Q6IGdhc0ZlZUluVXNkXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbGN1bGF0ZWQgZ2FzIGZlZTpcIiwgZ2FzRmVlKTsgLy8gRGVidWcgbG9nXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0b3JlIGdhcyBmZWUgaW4gbG9jYWxTdG9yYWdlXG4gICAgICAgICAgICBzdG9yZUdhc0ZlZSh0cmFuc2FjdGlvbi5oYXNoLCBnYXNGZWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgZ2FzIGZlZXMgc3RhdGVcbiAgICAgICAgICAgIHNldEdhc0ZlZXMocHJldiA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgZG9uYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByZXYuZG9uYXRlLFxuICAgICAgICAgICAgICAgICAgICBbYWN0aXZlQ29udHJhY3RdOiBnYXNGZWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIHRyaWdnZXJDYW1wYWlnbnNSZWZyZXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRyYWN0IENhbGwgRmFpbHVyZSFcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQmF0Y2ggZG9uYXRlIHdpdGggZ2FzIHRyYWNraW5nXG4gICAgY29uc3QgYmF0Y2hEb25hdGUgPSBhc3luYyAoaWRzLCBhbW91bnRzKSA9PiB7XG4gICAgICAgIGNvbnN0IHdlYjNNb2RhbCA9IG5ldyBXZW5iM01vZGFsKCk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB3ZWIzTW9kYWwuY29ubmVjdCgpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMucHJvdmlkZXJzLldlYjNQcm92aWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgY29uc3Qgc2lnbmVyID0gcHJvdmlkZXIuZ2V0U2lnbmVyKCk7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ID0gZmV0Y2hDb250cmFjdChcbiAgICAgICAgICAgIGdldEN1cnJlbnRDb250cmFjdCgpLmFkZHJlc3MsXG4gICAgICAgICAgICBnZXRDdXJyZW50Q29udHJhY3QoKS5hYmksXG4gICAgICAgICAgICBzaWduZXJcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHZhbHVlIGFuZCBmb3JtYXQgYW1vdW50cyBwcm9wZXJseVxuICAgICAgICAgICAgY29uc3QgdG90YWxWYWx1ZSA9IGFtb3VudHMucmVkdWNlKChzdW0sIGFtb3VudCkgPT4gXG4gICAgICAgICAgICAgICAgc3VtLmFkZChldGhlcnMudXRpbHMucGFyc2VFdGhlcihhbW91bnQudG9TdHJpbmcoKSkpLCBcbiAgICAgICAgICAgICAgICBldGhlcnMuQmlnTnVtYmVyLmZyb20oMClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEZvcm1hdCBhbW91bnRzIGZvciB0aGUgY29udHJhY3QgY2FsbFxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkQW1vdW50cyA9IGFtb3VudHMubWFwKGFtb3VudCA9PiBcbiAgICAgICAgICAgICAgICBldGhlcnMudXRpbHMucGFyc2VFdGhlcihhbW91bnQudG9TdHJpbmcoKSkudG9TdHJpbmcoKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW1wYWlnbiBJRHM6XCIsIGlkcyk7IC8vIERlYnVnIGxvZ1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZW5kaW5nIGFtb3VudHM6XCIsIGZvcm1hdHRlZEFtb3VudHMpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVG90YWwgdmFsdWU6XCIsIGV0aGVycy51dGlscy5mb3JtYXRFdGhlcih0b3RhbFZhbHVlKSk7IC8vIERlYnVnIGxvZ1xuXG4gICAgICAgICAgICBsZXQgdHJhbnNhY3Rpb247XG4gICAgICAgICAgICBsZXQgbWV0aG9kTmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgb25seSBvbmUgY2FtcGFpZ24gaXMgc2VsZWN0ZWQsIHVzZSByZWd1bGFyIGRvbmF0ZSBmdW5jdGlvblxuICAgICAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIHNpbmdsZSBkb25hdGlvbiBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lID0gJ2RvbmF0ZVRvQ2FtcGFpZ24nO1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gYXdhaXQgY29udHJhY3QuZG9uYXRlVG9DYW1wYWlnbihpZHNbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRvdGFsVmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBiYXRjaCBkb25hdGlvbiBmb3IgbXVsdGlwbGUgY2FtcGFpZ25zXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyBiYXRjaCBkb25hdGlvbiBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lID0gYWN0aXZlQ29udHJhY3QgPT09ICdiYXRjaC1wcm9jZXNzaW5nJyA/ICdkb25hdGVCYXRjaCcgOiAnYmF0Y2hEb25hdGUnO1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gYXdhaXQgY29udHJhY3RbbWV0aG9kTmFtZV0oaWRzLCBmb3JtYXR0ZWRBbW91bnRzLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b3RhbFZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgZ2FzIGZlZSBiZWZvcmUgd2FpdGluZyBmb3IgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IGdhc0ZlZSA9IGF3YWl0IGdldEdhc0ZlZSh0cmFuc2FjdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBnYXMgZmVlcyBzdGF0ZVxuICAgICAgICAgICAgc2V0R2FzRmVlcyhwcmV2ID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgICAgICBiYXRjaERvbmF0ZToge1xuICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LmJhdGNoRG9uYXRlLFxuICAgICAgICAgICAgICAgICAgICBbYWN0aXZlQ29udHJhY3RdOiBnYXNGZWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRyYW5zYWN0aW9uIHRvIGJlIG1pbmVkXG4gICAgICAgICAgICBjb25zdCByZWNlaXB0ID0gYXdhaXQgdHJhbnNhY3Rpb24ud2FpdCgpO1xuXG4gICAgICAgICAgICAvLyBMb2cgdHJhbnNhY3Rpb24gZm9yIGVhY2ggY2FtcGFpZ25cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlRG9uYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLmhhc2gsXG4gICAgICAgICAgICAgICAgICAgIGlkc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50c1tpXSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyaWdnZXJDYW1wYWlnbnNSZWZyZXNoKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRyYWN0IENhbGwgRmFpbHVyZSFcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQ2hlY2sgaWYgd2FsbGV0IGlzIGNvbm5lY3RlZFxuICAgIGNvbnN0IGNoZWNrSWZXYWxsZXRDb25uZWN0ZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkgcmV0dXJuIGNvbnNvbGUubG9nKFwiSW5zdGFsbCBNZXRhTWFza1wiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3aW5kb3cuZXRoZXJldW0ucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcImV0aF9hY2NvdW50c1wiLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChhY2NvdW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50QWNjb3VudChhY2NvdW50c1swXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gQWNjb3VudCBGb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU29tZXRoaW5nIHdyb25nIHdoaWxlIGNvbm5lY3RpbmcgdG8gd2FsbGV0IVwiKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDb25uZWN0IHdhbGxldFxuICAgIGNvbnN0IGNvbm5lY3RXYWxsZXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkgcmV0dXJuIGNvbnNvbGUubG9nKFwiSW5zdGFsbCBNZXRhbWFzayFcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldGhfcmVxdWVzdEFjY291bnRzXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRBY2NvdW50KGFjY291bnRzWzBdKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igd2hpbGUgY29ubmVjdGluZyB0byB3YWxsZXQhXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIERpc2Nvbm5lY3Qgd2FsbGV0XG4gICAgY29uc3QgZGlzY29ubmVjdFdhbGxldCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHdlYjNNb2RhbCA9IG5ldyBXZW5iM01vZGFsKCk7XG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgY2FjaGVkIHByb3ZpZGVyXG4gICAgICAgICAgICBpZiAod2ViM01vZGFsLmNhY2hlZFByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd2ViM01vZGFsLmNsZWFyQ2FjaGVkUHJvdmlkZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBjdXJyZW50IGFjY291bnRcbiAgICAgICAgICAgIHNldEN1cnJlbnRBY2NvdW50KFwiXCIpO1xuICAgICAgICAgICAgLy8gQ2xlYXIgYW55IHN0b3JlZCB3YWxsZXQgZGF0YSBpbiBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdXRUIzX0NPTk5FQ1RfQ0FDSEVEX1BST1ZJREVSJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlcXVlc3QgTWV0YU1hc2sgdG8gZGlzY29ubmVjdFxuICAgICAgICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIndhbGxldF9yZXF1ZXN0UGVybWlzc2lvbnNcIixcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbeyBldGhfYWNjb3VudHM6IHt9IH1dXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZvcmNlIHJlbG9hZCB0aGUgcGFnZSB0byBjbGVhciBhbnkgcmVtYWluaW5nIHN0YXRlXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIHdoaWxlIGRpc2Nvbm5lY3Rpbmcgd2FsbGV0IVwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY2hlY2tJZldhbGxldENvbm5lY3RlZCgpO1xuXG4gICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIE1ldGFNYXNrXG4gICAgICAgIGlmICh3aW5kb3cuZXRoZXJldW0pIHtcbiAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgYWNjb3VudCBjaGFuZ2VzXG4gICAgICAgICAgICB3aW5kb3cuZXRoZXJldW0ub24oJ2FjY291bnRzQ2hhbmdlZCcsIChhY2NvdW50cykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBkaXNjb25uZWN0ZWQgdGhlaXIgd2FsbGV0XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRBY2NvdW50KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnV0VCM19DT05ORUNUX0NBQ0hFRF9QUk9WSURFUicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgc3dpdGNoZWQgYWNjb3VudHNcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudEFjY291bnQoYWNjb3VudHNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNoYWluIGNoYW5nZXNcbiAgICAgICAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbignY2hhaW5DaGFuZ2VkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGRpc2Nvbm5lY3RcbiAgICAgICAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50QWNjb3VudChcIlwiKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnV0VCM19DT05ORUNUX0NBQ0hFRF9QUk9WSURFUicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAod2luZG93LmV0aGVyZXVtKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmV0aGVyZXVtLnJlbW92ZUFsbExpc3RlbmVycygnYWNjb3VudHNDaGFuZ2VkJyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmV0aGVyZXVtLnJlbW92ZUFsbExpc3RlbmVycygnY2hhaW5DaGFuZ2VkJyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmV0aGVyZXVtLnJlbW92ZUFsbExpc3RlbmVycygnZGlzY29ubmVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxNdWx0aUNvbnRyYWN0Q29udGV4dC5Qcm92aWRlclxuICAgICAgICAgICAgdmFsdWU9e3tcbiAgICAgICAgICAgICAgICBjdXJyZW50QWNjb3VudCxcbiAgICAgICAgICAgICAgICBhY3RpdmVDb250cmFjdCxcbiAgICAgICAgICAgICAgICBnYXNGZWVzLFxuICAgICAgICAgICAgICAgIHRpdGxlRGF0YSxcbiAgICAgICAgICAgICAgICBzd2l0Y2hDb250cmFjdCxcbiAgICAgICAgICAgICAgICBjcmVhdGVDYW1wYWlnbixcbiAgICAgICAgICAgICAgICBnZXRDYW1wYWlnbnMsXG4gICAgICAgICAgICAgICAgZ2V0VXNlckNhbXBhaWducyxcbiAgICAgICAgICAgICAgICBkb25hdGUsXG4gICAgICAgICAgICAgICAgYmF0Y2hEb25hdGUsXG4gICAgICAgICAgICAgICAgZ2V0RG9uYXRpb25zLFxuICAgICAgICAgICAgICAgIGNvbm5lY3RXYWxsZXQsXG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdFdhbGxldCxcbiAgICAgICAgICAgICAgICBnZXRDdXJyZW50Q29udHJhY3QsXG4gICAgICAgICAgICAgICAgY2FtcGFpZ25zVXBkYXRlZEZsYWdcbiAgICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9NdWx0aUNvbnRyYWN0Q29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xufTsgIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJjcmVhdGVDb250ZXh0IiwiV2VuYjNNb2RhbCIsImV0aGVycyIsIkNPTlRSQUNUUyIsIk11bHRpQ29udHJhY3RDb250ZXh0IiwiZmV0Y2hDb250cmFjdCIsImFkZHJlc3MiLCJhYmkiLCJzaWduZXJPclByb3ZpZGVyIiwiQ29udHJhY3QiLCJNdWx0aUNvbnRyYWN0UHJvdmlkZXIiLCJjaGlsZHJlbiIsImN1cnJlbnRBY2NvdW50Iiwic2V0Q3VycmVudEFjY291bnQiLCJhY3RpdmVDb250cmFjdCIsInNldEFjdGl2ZUNvbnRyYWN0IiwiZ2FzRmVlcyIsInNldEdhc0ZlZXMiLCJ0aXRsZURhdGEiLCJzZXRUaXRsZURhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2FtcGFpZ25zVXBkYXRlZEZsYWciLCJzZXRDYW1wYWlnbnNVcGRhdGVkRmxhZyIsInRyaWdnZXJDYW1wYWlnbnNSZWZyZXNoIiwicHJldiIsImNvbnNvbGUiLCJsb2ciLCJnZXRDdXJyZW50Q29udHJhY3QiLCJzd2l0Y2hDb250cmFjdCIsImNvbnRyYWN0VHlwZSIsImdldEV0aFByaWNlIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwicHJpY2UiLCJldGhlcmV1bSIsInVzZCIsIkVycm9yIiwiZXJyb3IiLCJ3YXJuIiwiZ2V0VHJhbnNhY3Rpb25Gcm9tRXRoZXJzY2FuIiwidHhIYXNoIiwicmVzdWx0IiwiZ2V0VHJhbnNhY3Rpb25SZWNlaXB0RnJvbUV0aGVyc2NhbiIsImdldEdhc0ZlZSIsInRyYW5zYWN0aW9uIiwicHJvdmlkZXIiLCJmZWVEYXRhIiwiZ2V0RmVlRGF0YSIsImdhc1ByaWNlIiwibWF4RmVlUGVyR2FzIiwiZ2FzTGltaXQiLCJlc3RpbWF0ZUdhcyIsImdhc0ZlZSIsIm11bCIsImV0aFByaWNlIiwiZ2FzRmVlSW5FdGgiLCJ1dGlscyIsImZvcm1hdEV0aGVyIiwiZ2FzRmVlSW5Vc2QiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImV0aCIsInN0b3JlR2FzRmVlIiwic3RvcmVkRmVlcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZ2V0U3RvcmVkR2FzRmVlIiwiZmVlIiwiY3JlYXRlQ2FtcGFpZ24iLCJjYW1wYWlnbiIsImFtb3VudCIsImRlYWRsaW5lIiwid2ViM01vZGFsIiwiY29ubmVjdGlvbiIsImNvbm5lY3QiLCJwcm92aWRlcnMiLCJXZWIzUHJvdmlkZXIiLCJzaWduZXIiLCJnZXRTaWduZXIiLCJjb250cmFjdCIsInBhcnNlVW5pdHMiLCJEYXRlIiwiZ2V0VGltZSIsIndhaXQiLCJnZXRDYW1wYWlnbnMiLCJjYW1wYWlnbnMiLCJwYXJzZWRDYW1wYWlnbnMiLCJtYXAiLCJpIiwib3duZXIiLCJ0YXJnZXQiLCJ0b1N0cmluZyIsInRvTnVtYmVyIiwiYW1vdW50Q29sbGVjdGVkIiwicElkIiwiY29udHJhY3RWZXJzaW9uIiwiZ2V0VXNlckNhbXBhaWducyIsImFsbENhbXBhaWducyIsImFjY291bnRzIiwid2luZG93IiwicmVxdWVzdCIsIm1ldGhvZCIsImN1cnJlbnRVc2VyIiwiZmlsdGVyZWRDYW1wYWlnbnMiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsInVzZXJEYXRhIiwiZ2V0RG9uYXRpb25zIiwiZG9uYXRpb25zIiwiZ2V0RG9uYXRvcnMiLCJudW1iZXJPZkRvbmF0aW9ucyIsImxlbmd0aCIsInBhcnNlZERvbmF0aW9ucyIsImRvbmF0b3JBZGRyZXNzIiwiZG9uYXRpb25BbW91bnQiLCJmaWx0ZXJzIiwiRG9uYXRlZCIsImV2ZW50cyIsInF1ZXJ5RmlsdGVyIiwibWF0Y2hpbmdFdmVudCIsImZpbmQiLCJldmVudCIsImV2ZW50QW1vdW50IiwiYXJncyIsInRyYW5zYWN0aW9uSGFzaCIsInN0b3JlZEZlZSIsInR4IiwiZ2V0VHJhbnNhY3Rpb24iLCJyZWNlaXB0IiwiZ2V0VHJhbnNhY3Rpb25SZWNlaXB0IiwiZ2FzVXNlZCIsImVmZmVjdGl2ZUdhc1ByaWNlIiwiZ2FzRmVlSW5XZWkiLCJkb25hdGlvbiIsImRvbmF0b3IiLCJwdXNoIiwiZG9uYXRlIiwiZG9uYXRlVG9DYW1wYWlnbiIsInZhbHVlIiwicGFyc2VFdGhlciIsImhhc2giLCJiYXRjaERvbmF0ZSIsImlkcyIsImFtb3VudHMiLCJ0b3RhbFZhbHVlIiwicmVkdWNlIiwic3VtIiwiYWRkIiwiQmlnTnVtYmVyIiwiZnJvbSIsImZvcm1hdHRlZEFtb3VudHMiLCJtZXRob2ROYW1lIiwiY3JlYXRlRG9uYXRpb24iLCJjaGVja0lmV2FsbGV0Q29ubmVjdGVkIiwiY29ubmVjdFdhbGxldCIsImRpc2Nvbm5lY3RXYWxsZXQiLCJjYWNoZWRQcm92aWRlciIsImNsZWFyQ2FjaGVkUHJvdmlkZXIiLCJyZW1vdmVJdGVtIiwicGFyYW1zIiwiZXRoX2FjY291bnRzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJvbiIsInJlbW92ZUFsbExpc3RlbmVycyIsIlByb3ZpZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Context/MultiContractContext.js\n"));

/***/ })

});